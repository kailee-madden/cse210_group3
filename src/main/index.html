<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/landing.css">
    <link rel="manifest" href="manifest.json"/>
    <link rel="icon" type="image/x-icon" href="resources/images/icons/favicon.ico">
    <link rel="apple-touch-icon" href="resources/images/icons/icon-144x144.png">
    <meta name="apple-mobile-web-app-status-bar" content="#db4938">
    <meta name="theme-color" content="#db4938">
    <title>Diversity Travel PWA</title>
  </head>

  <body>
    <main>
      <div class="row" id="main-page">
        <div class="col-3">
          <logo-component></logo-component>
        </div>
        <div class="col-6">
          <div id="upcoming-trips">
            <span class="display-6">Upcoming Trips</span>
          </div>
          <div class="container" id="trips_container"></div>
          <!-- Delete Trip Modal -->
          <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title fs-3" id="deleteModalLabel">Are you sure to delete this trip ?</h5>
                  <button type="button" class="btn-close" style="font-size: medium;" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <div class="row decisionButtons">
                    <div class="col">
                      <button type="button" id="delete" class="btn btn-secondary" data-bs-dismiss="modal" onclick="deleteTrip()">
                        Yes! Delete it.
                      </button>
                    </div>
                    <div class="col">
                      <button type="button" id="keep" class="btn btn-info" data-bs-dismiss="modal">
                        No! Keep it.
                      </button>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-primary closeFooter" data-bs-dismiss="modal">Back</button>
                </div>
              </div>
            </div>
          </div>
          <div class="trip-actions container">
            <button id="load-more"><i class="bi bi-plus-lg"></i> View More</button>
          </div>
          <div class="trip-actions">
            <span>
              Showing <span id="trip-count"></span> of <span id="trip-total"></span> Trips
            </span>
          </div>
        </div>
        <div class="col-2 gy-5">
          <div class="row justify-content-end">
            <button id="pastTrips" class="btn btn-secondary m-3 p-3 btn-lg btn-block">Past Trips</button>
          </div>
          <div class="row justify-content-end">
            <!-- Button trigger New Trip Modal -->
            <button id="newTrip" type="button" class="btn btn-info m-3 p-3 btn-lg" data-bs-toggle="modal" data-bs-target="#newTripModal">
              Plan a New Trip
            </button>
          </div>
        </div>
      </div>
      <!-- Plan New Trip Modal -->
      <div class="modal fade" id="newTripModal" tabindex="-1" aria-labelledby="newTripModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-3" id="newTripModalLabel">Let's Start Planning !</h1>
              <button type="button" class="btn-close" style="font-size: medium;" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form id="newTripForm">
                <div class="where input-group">
                  <span class="input-group-text">
                    <i class="bi bi-geo-alt-fill"></i>
                  </span>
                  <input type="text" class="form-control" id="location" name="location" placeholder="Where?" required>
                </div>
                <div class="dates input-group mb-3">
                  <div class="row">
                    <div class="col input-group">
                      <span class="input-group-text">
                        <i class="bi bi-calendar-event"></i>
                      </span>
                      <input class="form-control" id="startDate" name="startDate" placeholder="Start Date" 
                              onfocus="(this.type='date')" onblur="(this.type='text')" 
                              required pattern="\d{4}-\d{2}-\d{2}">
                    </div>
                    <div class="col input-group">
                      <span class="input-group-text">
                        <i class="bi bi-calendar-event"></i>
                      </span>
                      <input class="form-control" id="endDate" name="endDate" placeholder="End Date"
                              onfocus="(this.type='date')" onblur="(this.type='text')" 
                              required pattern="\d{4}-\d{2}-\d{2}">
                    </div>
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-info submit" id="submit" data-bs-dismiss="modal" onclick="addNewTrip()">Start Planning</button>
            </div>
          </div>
        </div>
      </div>
    </main>
    <script src="pages/components/logo.js" type="text/javascript"></script>
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="module" src="js/data/core/indexedDBKVStore.js"></script>
    <script type="module" src="js/data/core/abstractKvStore.js"></script>
    <script type="module" src="js/data/service/kvStoreDbService.js"></script>
    <script type="module" src="serviceworker.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>